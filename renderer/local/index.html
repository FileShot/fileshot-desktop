<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FileShot Desktop - Offline Vault</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="app-container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <!-- FileShot Logo - maintain aspect ratio -->
        <img src="./logonew.png" alt="FileShot" class="logo-img" />
        <button class="btn-collapse" id="btnCollapse" title="Toggle sidebar">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-item active" data-tool="vault">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>
          <span>Local Vault</span>
        </button>

        <button class="nav-item" data-tool="online" id="navOnline">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            <path d="M3.6 9h16.8"></path>
            <path d="M3.6 15h16.8"></path>
            <path d="M12 3a12 12 0 0 0 0 18"></path>
            <path d="M12 3a12 12 0 0 1 0 18"></path>
          </svg>
          <span>Online</span>
        </button>

        <div class="tools-menu" id="toolsMenu">
          <button class="nav-item tools-toggle" type="button" id="btnToolsToggle" aria-expanded="false">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l2.1-2.1a2 2 0 0 0 0-2.8l-1.2-1.2a2 2 0 0 0-2.8 0l-2.1 2.1z"></path>
              <path d="M8 7H4a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-4"></path>
            </svg>
            <span>Tools</span>
            <svg class="chev" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div class="tools-submenu" id="toolsSubmenu" hidden>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/converter.html">File Converter</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/compressor.html">Compressor</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/image-converter.html">Image Converter</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/pdf.html">PDF Editor</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/archive.html">Archive Builder</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/encrypt.html">Encrypt / Decrypt</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/hash.html">Hash Generator</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/virus-scanner.html">Virus Scanner</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/metadata-viewer.html">Metadata Viewer</button>
          </div>
        </div>

        <div class="sidebar-divider"></div>

        <button class="nav-item" data-tool="storage">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"></path>
            <path d="M12 6v12M6 12h12"></path>
          </svg>
          <span>Storage</span>
        </button>

        <button class="nav-item" data-tool="shred">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3 6 5 4 21 4 23 6"></polyline>
            <path d="M19 8v12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V8M10 12v4M14 12v4"></path>
          </svg>
          <span>Secure Shred</span>
        </button>

        <div class="sidebar-divider"></div>

        <button class="nav-item" data-tool="settings">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6m0 6v6M4.22 4.22l4.24 4.24m3.08 3.08l4.24 4.24M1 12h6m6 0h6M4.22 19.78l4.24-4.24m3.08-3.08l4.24-4.24"></path>
          </svg>
          <span>Settings</span>
        </button>
      </nav>

      <!-- Sidebar File Explorer - REMOVED, moved to right panel -->

      <div class="sidebar-footer">
        <button class="btn btn-primary btn-full" id="btnGoOnline">
          <span>Go Online</span>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
            <polyline points="15 3 21 3 21 9"></polyline>
            <line x1="10" y1="14" x2="21" y2="3"></line>
          </svg>
        </button>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Drop Zone Overlay -->
      <div class="drop-zone" id="dropZone" hidden>
        <div class="drop-zone-content">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
          <div class="drop-zone-text">Drop files here to encrypt & store</div>
        </div>
      </div>

      <!-- Topbar -->
      <header class="topbar">
        <div class="topbar-left">
          <h1 id="toolTitle">Local Vault</h1>
        </div>
        <div class="topbar-right">
          <button class="icon-btn" id="btnToggleExplorer" title="Toggle File Explorer">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
            </svg>
          </button>
          <span id="storageStatus" class="status-badge"></span>
        </div>
      </header>

      <!-- Tool Panels -->
      <div class="tools-container">
        <!-- VAULT TOOL -->
        <section class="tool-panel" id="tool-vault">
          <div class="vault-toolbar">
            <div class="vault-toolbar-left">
              <button class="btn btn-primary" id="btnAddFiles">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                Add Files
              </button>
              <button class="btn btn-secondary" id="btnAddFolder">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>
                Add Folder
              </button>
              <div class="toolbar-divider"></div>
              <button class="btn btn-ghost" id="btnSelectAll" title="Select all files">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M9 12l2 2 4-4"/></svg>
                Select All
              </button>
              <button class="btn btn-ghost" id="btnSelectNone" title="Deselect all">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>
                None
              </button>
              <div class="toolbar-divider"></div>
              <button class="btn btn-accent" id="btnUploadVault" title="Upload selected to FileShot.io">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                  <polyline points="17 8 12 3 7 8"></polyline>
                  <line x1="12" y1="3" x2="12" y2="15"></line>
                </svg>
                Upload
              </button>
              <button class="btn btn-danger" id="btnDeleteSelected" title="Delete selected files">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                Delete
              </button>
            </div>
            <div class="vault-toolbar-right">
              <span class="selection-count" id="selectionCount">0 selected</span>
              <button class="icon-btn view-toggle" id="btnVaultGridView" title="Grid view">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <rect x="3" y="3" width="7" height="7"></rect>
                  <rect x="14" y="3" width="7" height="7"></rect>
                  <rect x="3" y="14" width="7" height="7"></rect>
                  <rect x="14" y="14" width="7" height="7"></rect>
                </svg>
              </button>
              <button class="icon-btn view-toggle active" id="btnVaultListView" title="List view">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="8" y1="6" x2="21" y2="6"></line>
                  <line x1="8" y1="12" x2="21" y2="12"></line>
                  <line x1="8" y1="18" x2="21" y2="18"></line>
                  <line x1="3" y1="6" x2="3.01" y2="6"></line>
                  <line x1="3" y1="12" x2="3.01" y2="12"></line>
                  <line x1="3" y1="18" x2="3.01" y2="18"></line>
                </svg>
              </button>
            </div>
          </div>
          <div class="vault-encryption-info">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            <span>AES-256-GCM Encryption • Password Protected • Zero-Knowledge</span>
          </div>
          <div id="vaultStatus" class="status" hidden></div>
          <div id="vaultList" class="vault-list vault-list-view"></div>
          <div id="vaultEmpty" class="vault-empty" hidden>
            <div class="vault-empty-icon">
              <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
            </div>
            <div class="vault-empty-title">Your Encrypted Vault is Empty</div>
            <div class="vault-empty-text">Drag files here or click "Add Files" to encrypt and store securely.</div>
            <div class="vault-empty-hint">All files are encrypted with AES-256-GCM using your password.</div>
          </div>
        </section>

        <!-- ONLINE TOOL (LIVE SITE IN-APP) -->
        <section class="tool-panel" id="tool-online" data-tool="online" hidden>
          <div class="online-shell">
            <div class="online-bar">
              <div class="online-controls">
                <button class="icon-btn" id="btnOnlineBack" title="Back" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 18 9 12 15 6"></polyline>
                  </svg>
                </button>
                <button class="icon-btn" id="btnOnlineForward" title="Forward" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9 18 15 12 9 6"></polyline>
                  </svg>
                </button>
                <button class="icon-btn" id="btnOnlineReload" title="Reload" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="23 4 23 10 17 10"/>
                    <polyline points="1 20 1 14 7 14"/>
                    <path d="M3.51 9a9 9 0 0 1 14.13-3.36L23 10"/>
                    <path d="M20.49 15a9 9 0 0 1-14.13 3.36L1 14"/>
                  </svg>
                </button>
              </div>
              <div class="online-url" id="onlineUrl" title="Current page">https://fileshot.io</div>
              <button class="btn btn-secondary" id="btnOnlineOpenExternal" type="button">
                Open in Browser
              </button>
            </div>

            <div class="online-frame">
              <webview id="onlineWebview" partition="persist:fileshot" allowpopups></webview>
            </div>
          </div>
        </section>

        <!-- PDF TOOL -->
        <section class="tool-panel" id="tool-pdf" data-tool="pdf" hidden>
          <div class="panel-placeholder">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
              <polyline points="13 2 13 9 20 9"></polyline>
            </svg>
            <div class="placeholder-title">PDF Tools (Offline)</div>
            <div class="placeholder-text">Compress, merge, split, and encrypt PDFs locally</div>
            <button class="btn btn-primary">Coming Soon</button>
          </div>
        </section>

        <!-- IMAGE TOOL -->
        <section class="tool-panel" id="tool-image" data-tool="image" hidden>
          <div class="panel-placeholder">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
            <div class="placeholder-title">Image Tools (Offline)</div>
            <div class="placeholder-text">Resize, convert, strip metadata, and encrypt images</div>
            <button class="btn btn-primary">Coming Soon</button>
          </div>
        </section>

        <!-- TEXT TOOL -->
        <section class="tool-panel" id="tool-text" data-tool="text" hidden>
          <div class="panel-placeholder">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            <div class="placeholder-title">Text Tools (Offline)</div>
            <div class="placeholder-text">Hash, encode, encrypt, and format text locally</div>
            <button class="btn btn-primary">Coming Soon</button>
          </div>
        </section>

        <!-- STORAGE TOOL -->
        <section class="tool-panel" id="tool-storage" data-tool="storage" hidden>
          <div class="storage-header">
            <h2>Storage & Vault Management</h2>
          </div>

          <div class="storage-card">
            <div class="storage-item">
              <div class="storage-label">Local Vault Size</div>
              <div class="storage-value" id="storageUsed">0 B</div>
              <div class="hint">Total size of encrypted files in your vault</div>
            </div>

            <div class="storage-item">
              <div class="storage-label">Free Space</div>
              <div class="storage-value" id="storageFree">-- GB</div>
              <div class="hint">Available space on your system</div>
            </div>
          </div>

          <div class="storage-card">
            <h3>Vault Actions</h3>
            <button class="btn btn-primary btn-full" id="btnExportVault">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              Export Vault Backup
            </button>

            <button class="btn btn-secondary btn-full" id="btnImportVault" style="margin-top: 8px;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
              </svg>
              Import Vault Backup
            </button>

            <button class="btn btn-danger btn-full" id="btnClearVault" style="margin-top: 8px;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 4 21 4 23 6"></polyline>
                <path d="M19 8v12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V8M10 12v4M14 12v4"></path>
              </svg>
              Clear All Files
            </button>
          </div>

          <div class="storage-card">
            <h3>File Details</h3>
            <div id="storageFileList" class="file-list"></div>
          </div>
        </section>

        <!-- SECURE SHRED TOOL -->
        <section class="tool-panel" id="tool-shred" data-tool="shred" hidden>
          <div class="shred-header">
            <h2>Secure File Shredding (Like BleachBit)</h2>
            <p class="hint" style="margin-top: 8px;">Permanently erase files so they cannot be recovered. Multiple passes ensure complete removal.</p>
          </div>

          <div class="shred-options">
            <div class="shred-card">
              <h3>Shred Method</h3>
              <div class="radio-group">
                <label class="radio-label">
                  <input type="radio" name="shredMethod" value="dod" checked />
                  <span><strong>DoD 5220.22-M</strong> (7 passes)</span>
                  <div class="radio-hint">Military-grade secure deletion</div>
                </label>
                <label class="radio-label">
                  <input type="radio" name="shredMethod" value="gutmann" />
                  <span><strong>Gutmann</strong> (35 passes)</span>
                  <div class="radio-hint">Maximum security, slower</div>
                </label>
                <label class="radio-label">
                  <input type="radio" name="shredMethod" value="simple" />
                  <span><strong>Single Pass</strong> (1 pass)</span>
                  <div class="radio-hint">Fast, modern SSDs</div>
                </label>
              </div>
            </div>

            <div class="shred-card">
              <h3>Target Files</h3>
              <div class="shred-targets">
                <label class="checkbox-label">
                  <input type="checkbox" id="shredDownloads" checked />
                  <span>Downloads folder</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="shredTemp" checked />
                  <span>Temp/Cache files</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="shredRecycleBin" />
                  <span>Recycle Bin (Windows) / Trash (macOS/Linux)</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="shredBrowserCache" />
                  <span>Browser cache & cookies</span>
                </label>
              </div>
            </div>

            <div class="shred-card">
              <h3>Custom Targets</h3>
              <div class="panel-actions" style="margin: 0 0 12px;">
                <button class="btn btn-secondary" id="btnShredAddFiles" type="button">
                  Add Files
                </button>
                <button class="btn btn-secondary" id="btnShredAddFolder" type="button">
                  Add Folder
                </button>
              </div>
              <div id="shredPathList" class="shred-path-list"></div>
              <div class="hint">These will be permanently deleted using your chosen shred method.</div>
            </div>

            <div class="shred-card">
              <button class="btn btn-danger btn-full" id="btnStartShred">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 4 21 4 23 6"></polyline>
                  <path d="M19 8v12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V8M10 12v4M14 12v4"></path>
                </svg>
                Start Shredding
              </button>

              <div id="shredProgress" class="shred-progress" hidden>
                <div class="progress" style="margin: 12px 0;">
                  <div id="shredProgressFill" class="progress-fill" style="width: 0%"></div>
                </div>
                <div id="shredProgressText" class="hint" style="text-align: center;">Initializing...</div>
              </div>
            </div>
          </div>
        </section>

        <!-- SETTINGS TOOL -->
        <section class="tool-panel" id="tool-settings" data-tool="settings" hidden>
          <div class="settings-header">
            <h2>Offline Vault Settings</h2>
          </div>

          <div class="settings-card">
            <h3>Security Settings</h3>
            <label class="checkbox-label">
              <input type="checkbox" id="autoLock" />
              <span>Auto-lock after 5 minutes of inactivity</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="requirePin" />
              <span>Require PIN to access vault</span>
            </label>
          </div>

          <div class="settings-card">
            <h3>About</h3>
            <div class="info-row">
              <span>FileShot Desktop v1.4.3</span>
              <span class="muted">Password-protected encryption</span>
            </div>
            <div class="info-row" style="margin-top: 8px;">
              <span>All encryption happens locally</span>
              <span class="muted">AES-256-GCM • Zero-knowledge</span>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Resize Handle -->
    <div class="resize-handle" id="resizeHandle"></div>

    <!-- Right Sidebar: File Explorer -->
    <aside class="explorer-sidebar" id="explorerSidebar">
      <div class="explorer-header">
        <div class="explorer-title">File Explorer</div>
        <div class="explorer-actions">
          <button class="icon-btn" id="btnExplorerView" title="Toggle grid/list view">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="7" height="7"></rect>
              <rect x="14" y="3" width="7" height="7"></rect>
              <rect x="3" y="14" width="7" height="7"></rect>
              <rect x="14" y="14" width="7" height="7"></rect>
            </svg>
          </button>
          <button class="icon-btn" id="btnExplorerUp" title="Go up">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 19V5"/>
              <polyline points="5 12 12 5 19 12"/>
            </svg>
          </button>
          <button class="icon-btn" id="btnExplorerRefresh" title="Refresh">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"/>
              <polyline points="1 20 1 14 7 14"/>
              <path d="M3.51 9a9 9 0 0 1 14.13-3.36L23 10"/>
              <path d="M20.49 15a9 9 0 0 1-14.13 3.36L1 14"/>
            </svg>
          </button>
        </div>
      </div>
      <div class="explorer-path" id="explorerPath">Loading…</div>
      <div class="explorer-list" id="explorerList"></div>
      <div class="explorer-hint">Double-click files to add to vault. Click "Add" button to add, or drag to external apps. Ctrl/Shift for multi-select.</div>
    </aside>
  </div>

  <!-- Password Modal for Encryption -->
  <div id="passwordModal" class="modal-overlay" hidden>
    <div class="modal-content">
      <div class="modal-header">
        <div class="modal-icon">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>
        </div>
        <h2 id="passwordModalTitle">Set Encryption Password</h2>
        <p class="modal-subtitle" id="passwordModalSubtitle">Your files will be encrypted with AES-256-GCM</p>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <div class="label-row">
            <label for="encryptPassword">Password</label>
            <button type="button" class="btn btn-sm btn-generate" id="btnGeneratePassword" title="Generate strong password">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/></svg>
              Generate
            </button>
          </div>
          <div class="password-input-group">
            <input type="password" id="encryptPassword" class="form-input" placeholder="Enter or generate a strong password" autocomplete="new-password" />
            <button type="button" class="btn-icon" id="btnCopyPassword" title="Copy password">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
            </button>
            <button type="button" class="btn-icon" id="btnTogglePassword" title="Show/hide password">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </button>
          </div>
        </div>
        <div class="form-group" id="confirmPasswordGroup">
          <label for="confirmPassword">Confirm Password</label>
          <input type="password" id="confirmPassword" class="form-input" placeholder="Confirm your password" autocomplete="new-password" />
        </div>
        <div class="password-strength" id="passwordStrength">
          <div class="strength-bar"><div class="strength-fill" id="strengthFill"></div></div>
          <span class="strength-text" id="strengthText">Password strength: Enter a password</span>
        </div>
        <div class="password-options">
          <label class="checkbox-inline">
            <input type="checkbox" id="chkSavePassword" />
            <span>Save password for this session (until app closes)</span>
          </label>
        </div>
        <div class="modal-warning">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
          </svg>
          <span><strong>Important:</strong> Copy and save this password! Without it, your files cannot be decrypted.</span>
        </div>
        <div class="files-to-encrypt" id="filesToEncrypt"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="btnCancelPassword">Cancel</button>
        <button type="button" class="btn btn-primary" id="btnConfirmPassword">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>
          Encrypt Files
        </button>
      </div>
    </div>
  </div>

  <!-- Decrypt Password Modal -->
  <div id="decryptModal" class="modal-overlay" hidden>
    <div class="modal-content modal-decrypt">
      <div class="modal-header">
        <div class="modal-icon unlock">
          <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 5-5 5 5 0 0 1 4.33 2.5"></path>
          </svg>
        </div>
        <h2>Enter Decryption Password</h2>
        <p class="modal-subtitle" id="decryptFileName">Decrypt file</p>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label for="decryptPassword">Password</label>
          <div class="password-input-group">
            <input type="password" id="decryptPassword" class="form-input" placeholder="Enter your password" autocomplete="current-password" />
            <button type="button" class="btn-icon" id="btnToggleDecryptPassword" title="Show/hide password">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </button>
          </div>
        </div>
        <div id="decryptError" class="form-error" hidden>Incorrect password. Please try again.</div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="btnCancelDecrypt">Cancel</button>
        <button type="button" class="btn btn-primary" id="btnConfirmDecrypt">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 5-5 5 5 0 0 1 4.33 2.5"></path>
          </svg>
          Decrypt
        </button>
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
