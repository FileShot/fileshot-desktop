<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FileShot Desktop - Offline Vault</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="app-container">
    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <!-- FileShot Logo -->
        <svg class="logo-mini" width="24" height="24" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
          <path d="M8 12 L8 52 L56 52 L56 24 L32 24 L28 20 L8 20 Z" fill="#FA3800" stroke="#D92F00" stroke-width="1.5" stroke-linejoin="round"/>
          <path d="M8 20 L28 20 L32 24 L8 24 Z" fill="#D92F00"/>
          <path d="M28 18 L26 28 L32 28 L28 38 L36 34 L34 24 L30 24 Z" fill="#FFFFFF" stroke="#FFFFFF" stroke-width="0.5" stroke-linejoin="miter"/>
        </svg>
        <button class="btn-collapse" id="btnCollapse" title="Toggle sidebar">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
      </div>

      <nav class="sidebar-nav">
        <button class="nav-item active" data-tool="vault">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
          </svg>
          <span>Local Vault</span>
        </button>

        <button class="nav-item" data-tool="online" id="navOnline">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"></path>
            <path d="M3.6 9h16.8"></path>
            <path d="M3.6 15h16.8"></path>
            <path d="M12 3a12 12 0 0 0 0 18"></path>
            <path d="M12 3a12 12 0 0 1 0 18"></path>
          </svg>
          <span>Online</span>
        </button>

        <div class="tools-menu" id="toolsMenu">
          <button class="nav-item tools-toggle" type="button" id="btnToolsToggle" aria-expanded="false">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l2.1-2.1a2 2 0 0 0 0-2.8l-1.2-1.2a2 2 0 0 0-2.8 0l-2.1 2.1z"></path>
              <path d="M8 7H4a2 2 0 0 0-2 2v11a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-4"></path>
            </svg>
            <span>Tools</span>
            <svg class="chev" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </button>
          <div class="tools-submenu" id="toolsSubmenu" hidden>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/converter.html">File Converter</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/compressor.html">Compressor</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/image-converter.html">Image Converter</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/pdf.html">PDF Editor</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/archive.html">Archive Builder</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/encrypt.html">Encrypt / Decrypt</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/hash.html">Hash Generator</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/virus-scanner.html">Virus Scanner</button>
            <button class="nav-subitem" type="button" data-online-url="https://fileshot.io/tools/metadata-viewer.html">Metadata Viewer</button>
          </div>
        </div>

        <div class="sidebar-divider"></div>

        <button class="nav-item" data-tool="storage">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"></path>
            <path d="M12 6v12M6 12h12"></path>
          </svg>
          <span>Storage</span>
        </button>

        <button class="nav-item" data-tool="shred">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3 6 5 4 21 4 23 6"></polyline>
            <path d="M19 8v12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V8M10 12v4M14 12v4"></path>
          </svg>
          <span>Secure Shred</span>
        </button>

        <div class="sidebar-divider"></div>

        <button class="nav-item" data-tool="settings">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"></circle>
            <path d="M12 1v6m0 6v6M4.22 4.22l4.24 4.24m3.08 3.08l4.24 4.24M1 12h6m6 0h6M4.22 19.78l4.24-4.24m3.08-3.08l4.24-4.24"></path>
          </svg>
          <span>Settings</span>
        </button>
      </nav>

      <!-- Sidebar File Explorer - REMOVED, moved to right panel -->

      <div class="sidebar-footer">
        <button class="btn btn-primary btn-full" id="btnGoOnline">
          <span>Go Online</span>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
            <polyline points="15 3 21 3 21 9"></polyline>
            <line x1="10" y1="14" x2="21" y2="3"></line>
          </svg>
        </button>
      </div>
    </aside>

    <!-- Main Content Area -->
    <main class="main-content">
      <!-- Drop Zone Overlay -->
      <div class="drop-zone" id="dropZone" hidden>
        <div class="drop-zone-content">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
          <div class="drop-zone-text">Drop files here to encrypt & store</div>
        </div>
      </div>

      <!-- Topbar -->
      <header class="topbar">
        <div class="topbar-left">
          <h1 id="toolTitle">Local Vault</h1>
        </div>
        <div class="topbar-right">
          <button class="icon-btn" id="btnToggleExplorer" title="Toggle File Explorer">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
            </svg>
          </button>
          <span id="storageStatus" class="status-badge"></span>
        </div>
      </header>

      <!-- Tool Panels -->
      <div class="tools-container">
        <!-- VAULT TOOL -->
        <section class="tool-panel" id="tool-vault">
          <div class="panel-actions">
            <button class="btn btn-primary" id="btnAddFiles">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
              Add Files
            </button>
            <button class="btn btn-secondary" id="btnAddFolder">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg>
              Add Folder
            </button>
          </div>
          <div id="vaultStatus" class="status"></div>
          <div id="vaultList" class="vault-list" style="min-height: 300px; padding: 40px 20px; text-align: center; color: var(--text-secondary);">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" style="margin: 0 auto 16px; opacity: 0.5;">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
            <div style="font-size: 16px; margin-bottom: 8px;">Your vault is empty</div>
            <div style="font-size: 13px;">Drag files here or click Add Files to begin</div>
          </div>
        </section>

        <!-- ONLINE TOOL (LIVE SITE IN-APP) -->
        <section class="tool-panel" id="tool-online" data-tool="online" hidden>
          <div class="online-shell">
            <div class="online-bar">
              <div class="online-controls">
                <button class="icon-btn" id="btnOnlineBack" title="Back" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 18 9 12 15 6"></polyline>
                  </svg>
                </button>
                <button class="icon-btn" id="btnOnlineForward" title="Forward" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9 18 15 12 9 6"></polyline>
                  </svg>
                </button>
                <button class="icon-btn" id="btnOnlineReload" title="Reload" type="button">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="23 4 23 10 17 10"/>
                    <polyline points="1 20 1 14 7 14"/>
                    <path d="M3.51 9a9 9 0 0 1 14.13-3.36L23 10"/>
                    <path d="M20.49 15a9 9 0 0 1-14.13 3.36L1 14"/>
                  </svg>
                </button>
              </div>
              <div class="online-url" id="onlineUrl" title="Current page">https://fileshot.io</div>
              <button class="btn btn-secondary" id="btnOnlineOpenExternal" type="button">
                Open in Browser
              </button>
            </div>

            <div class="online-frame">
              <webview id="onlineWebview" partition="persist:fileshot" allowpopups></webview>
            </div>
          </div>
        </section>

        <!-- PDF TOOL -->
        <section class="tool-panel" id="tool-pdf" data-tool="pdf" hidden>
          <div class="panel-placeholder">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
              <polyline points="13 2 13 9 20 9"></polyline>
            </svg>
            <div class="placeholder-title">PDF Tools (Offline)</div>
            <div class="placeholder-text">Compress, merge, split, and encrypt PDFs locally</div>
            <button class="btn btn-primary">Coming Soon</button>
          </div>
        </section>

        <!-- IMAGE TOOL -->
        <section class="tool-panel" id="tool-image" data-tool="image" hidden>
          <div class="panel-placeholder">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
            <div class="placeholder-title">Image Tools (Offline)</div>
            <div class="placeholder-text">Resize, convert, strip metadata, and encrypt images</div>
            <button class="btn btn-primary">Coming Soon</button>
          </div>
        </section>

        <!-- TEXT TOOL -->
        <section class="tool-panel" id="tool-text" data-tool="text" hidden>
          <div class="panel-placeholder">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
            </svg>
            <div class="placeholder-title">Text Tools (Offline)</div>
            <div class="placeholder-text">Hash, encode, encrypt, and format text locally</div>
            <button class="btn btn-primary">Coming Soon</button>
          </div>
        </section>

        <!-- STORAGE TOOL -->
        <section class="tool-panel" id="tool-storage" data-tool="storage" hidden>
          <div class="storage-header">
            <h2>Storage & Vault Management</h2>
          </div>

          <div class="storage-card">
            <div class="storage-item">
              <div class="storage-label">Local Vault Size</div>
              <div class="storage-value" id="storageUsed">0 B</div>
              <div class="hint">Total size of encrypted files in your vault</div>
            </div>

            <div class="storage-item">
              <div class="storage-label">Free Space</div>
              <div class="storage-value" id="storageFree">-- GB</div>
              <div class="hint">Available space on your system</div>
            </div>
          </div>

          <div class="storage-card">
            <h3>Vault Actions</h3>
            <button class="btn btn-primary btn-full" id="btnExportVault">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              Export Vault Backup
            </button>

            <button class="btn btn-secondary btn-full" id="btnImportVault" style="margin-top: 8px;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
              </svg>
              Import Vault Backup
            </button>

            <button class="btn btn-danger btn-full" id="btnClearVault" style="margin-top: 8px;">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 4 21 4 23 6"></polyline>
                <path d="M19 8v12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V8M10 12v4M14 12v4"></path>
              </svg>
              Clear All Files
            </button>
          </div>

          <div class="storage-card">
            <h3>File Details</h3>
            <div id="storageFileList" class="file-list"></div>
          </div>
        </section>

        <!-- SECURE SHRED TOOL -->
        <section class="tool-panel" id="tool-shred" data-tool="shred" hidden>
          <div class="shred-header">
            <h2>Secure File Shredding (Like BleachBit)</h2>
            <p class="hint" style="margin-top: 8px;">Permanently erase files so they cannot be recovered. Multiple passes ensure complete removal.</p>
          </div>

          <div class="shred-options">
            <div class="shred-card">
              <h3>Shred Method</h3>
              <div class="radio-group">
                <label class="radio-label">
                  <input type="radio" name="shredMethod" value="dod" checked />
                  <span><strong>DoD 5220.22-M</strong> (7 passes)</span>
                  <div class="radio-hint">Military-grade secure deletion</div>
                </label>
                <label class="radio-label">
                  <input type="radio" name="shredMethod" value="gutmann" />
                  <span><strong>Gutmann</strong> (35 passes)</span>
                  <div class="radio-hint">Maximum security, slower</div>
                </label>
                <label class="radio-label">
                  <input type="radio" name="shredMethod" value="simple" />
                  <span><strong>Single Pass</strong> (1 pass)</span>
                  <div class="radio-hint">Fast, modern SSDs</div>
                </label>
              </div>
            </div>

            <div class="shred-card">
              <h3>Target Files</h3>
              <div class="shred-targets">
                <label class="checkbox-label">
                  <input type="checkbox" id="shredDownloads" checked />
                  <span>Downloads folder</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="shredTemp" checked />
                  <span>Temp/Cache files</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="shredRecycleBin" />
                  <span>Recycle Bin (Windows) / Trash (macOS/Linux)</span>
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" id="shredBrowserCache" />
                  <span>Browser cache & cookies</span>
                </label>
              </div>
            </div>

            <div class="shred-card">
              <h3>Custom Targets</h3>
              <div class="panel-actions" style="margin: 0 0 12px;">
                <button class="btn btn-secondary" id="btnShredAddFiles" type="button">
                  Add Files
                </button>
                <button class="btn btn-secondary" id="btnShredAddFolder" type="button">
                  Add Folder
                </button>
              </div>
              <div id="shredPathList" class="shred-path-list"></div>
              <div class="hint">These will be permanently deleted using your chosen shred method.</div>
            </div>

            <div class="shred-card">
              <button class="btn btn-danger btn-full" id="btnStartShred">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="3 6 5 4 21 4 23 6"></polyline>
                  <path d="M19 8v12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V8M10 12v4M14 12v4"></path>
                </svg>
                Start Shredding
              </button>

              <div id="shredProgress" class="shred-progress" hidden>
                <div class="progress" style="margin: 12px 0;">
                  <div id="shredProgressFill" class="progress-fill" style="width: 0%"></div>
                </div>
                <div id="shredProgressText" class="hint" style="text-align: center;">Initializing...</div>
              </div>
            </div>
          </div>
        </section>

        <!-- SETTINGS TOOL -->
        <section class="tool-panel" id="tool-settings" data-tool="settings" hidden>
          <div class="settings-header">
            <h2>Offline Vault Settings</h2>
          </div>

          <div class="settings-card">
            <h3>Security Settings</h3>
            <label class="checkbox-label">
              <input type="checkbox" id="autoLock" />
              <span>Auto-lock after 5 minutes of inactivity</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="requirePin" />
              <span>Require PIN to access vault</span>
            </label>
          </div>

          <div class="settings-card">
            <h3>About</h3>
            <div class="info-row">
              <span>FileShot Desktop v1.4.2</span>
              <span class="muted">Offline-first encryption</span>
            </div>
            <div class="info-row" style="margin-top: 8px;">
              <span>All encryption happens locally</span>
              <span class="muted">Zero-knowledge architecture</span>
            </div>
          </div>
        </section>
      </div>
    </main>

    <!-- Resize Handle -->
    <div class="resize-handle" id="resizeHandle"></div>

    <!-- Right Sidebar: File Explorer -->
    <aside class="explorer-sidebar" id="explorerSidebar">
      <div class="explorer-header">
        <div class="explorer-title">File Explorer</div>
        <div class="explorer-actions">
          <button class="icon-btn" id="btnExplorerView" title="Toggle grid/list view">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="7" height="7"></rect>
              <rect x="14" y="3" width="7" height="7"></rect>
              <rect x="3" y="14" width="7" height="7"></rect>
              <rect x="14" y="14" width="7" height="7"></rect>
            </svg>
          </button>
          <button class="icon-btn" id="btnExplorerUp" title="Go up">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 19V5"/>
              <polyline points="5 12 12 5 19 12"/>
            </svg>
          </button>
          <button class="icon-btn" id="btnExplorerRefresh" title="Refresh">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="23 4 23 10 17 10"/>
              <polyline points="1 20 1 14 7 14"/>
              <path d="M3.51 9a9 9 0 0 1 14.13-3.36L23 10"/>
              <path d="M20.49 15a9 9 0 0 1-14.13 3.36L1 14"/>
            </svg>
          </button>
        </div>
      </div>
      <div class="explorer-path" id="explorerPath">Loadingâ€¦</div>
      <div class="explorer-list" id="explorerList"></div>
      <div class="explorer-hint">Double-click files to add to vault. Click "Add" button to add, or drag to external apps. Ctrl/Shift for multi-select.</div>
    </aside>
  </div>

  <script src="./app.js"></script>
</body>
</html>
